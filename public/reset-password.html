<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Redirecting...</title>
  <script>
    // This page handles the Supabase password reset redirect
    // The token comes in the URL hash from Supabase
    const hash = window.location.hash;
    
    // Remove the leading # from hash if present
    const params = hash.startsWith('#') ? hash.substring(1) : hash;
    
    // Check if there's an error
    const urlParams = new URLSearchParams(params);
    const error = urlParams.get('error');
    const errorCode = urlParams.get('error_code');
    const errorDesc = urlParams.get('error_description');
    
    if (error) {
      // Redirect to reset password page with error
      window.location.href = window.location.origin + '/HomeDoc/#/reset-password?error=' + encodeURIComponent(errorDesc || error);
    } else {
      // Redirect to our HashRouter reset password page with the tokens
      window.location.href = window.location.origin + '/HomeDoc/#/reset-password?' + params;
    }
  </script>
</head>
<body>
  <p>Redirecting to password reset page...</p>
</body>
</html>
